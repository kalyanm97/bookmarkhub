"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_src_stores_bookmarks_store_ts"],{

/***/ "(app-pages-browser)/./src/stores/bookmarks.store.ts":
/*!***************************************!*\
  !*** ./src/stores/bookmarks.store.ts ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFeedStore: function() { return /* binding */ useFeedStore; }\n/* harmony export */ });\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zustand */ \"(app-pages-browser)/../node_modules/zustand/esm/index.mjs\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/api */ \"(app-pages-browser)/./src/lib/api.ts\");\n/* harmony import */ var _auth_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth.store */ \"(app-pages-browser)/./src/stores/auth.store.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils */ \"(app-pages-browser)/./src/lib/utils.ts\");\n/* __next_internal_client_entry_do_not_use__ useFeedStore auto */ \n\n\n\nconst PERSIST_KEY = \"bookmarkhub.votes.v1\";\nfunction persistedKeyForUser() {\n    try {\n        if (false) {}\n        const u = _auth_store__WEBPACK_IMPORTED_MODULE_1__.useAuthStore.getState().user;\n        return u && u.id ? \"\".concat(PERSIST_KEY, \".\").concat(u.id) : \"\".concat(PERSIST_KEY, \".anon\");\n    } catch (e) {\n        return \"\".concat(PERSIST_KEY, \".anon\");\n    }\n}\nfunction readPersistedVotes() {\n    try {\n        if (false) {}\n        const key = persistedKeyForUser();\n        const raw = localStorage.getItem(key);\n        if (!raw) return {};\n        const parsed = JSON.parse(raw);\n        return typeof parsed === \"object\" && parsed ? parsed : {};\n    } catch (e) {\n        return {};\n    }\n}\nfunction writePersistedVotes(map) {\n    try {\n        if (false) {}\n        const key = persistedKeyForUser();\n        localStorage.setItem(key, JSON.stringify(map));\n    } catch (e) {\n        void e;\n    }\n}\nconst useFeedStore = (0,zustand__WEBPACK_IMPORTED_MODULE_3__.create)((set, get)=>({\n        items: [],\n        loading: false,\n        error: null,\n        async fetch () {\n            set({\n                loading: true,\n                error: null\n            });\n            try {\n                const data = await (0,_lib_api__WEBPACK_IMPORTED_MODULE_0__.api)(\"/bookmarks\");\n                const raw = readPersistedVotes();\n                const currentUser = _auth_store__WEBPACK_IMPORTED_MODULE_1__.useAuthStore.getState().user;\n                const merged = data.map((it)=>{\n                    const persisted = raw[it.id];\n                    var _it_userVote;\n                    let uv = (_it_userVote = it.userVote) !== null && _it_userVote !== void 0 ? _it_userVote : 0;\n                    if (currentUser && currentUser.id) {\n                        if (uv === 0 && typeof persisted === \"number\" && persisted !== 0) uv = persisted;\n                    } else {\n                        uv = typeof persisted === \"number\" ? persisted : uv;\n                    }\n                    return {\n                        ...it,\n                        userVote: uv\n                    };\n                });\n                set({\n                    items: merged\n                });\n            } catch (e) {\n                const msg = (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.extractErrorMessage)(e, \"Failed to load feed\");\n                set({\n                    error: msg\n                });\n                try {\n                    if (String(\"development\") !== \"production\") console.debug(\"[bookmarks.store] fetch failed\", e);\n                } catch (e) {\n                    void 0;\n                }\n            } finally{\n                set({\n                    loading: false\n                });\n            }\n        },\n        startLive () {\n            const t = get()._timer;\n            if (t) return;\n            const timer = setInterval(()=>get().fetch(), 10000);\n            set({\n                _timer: timer\n            });\n        },\n        stopLive () {\n            const t = get()._timer;\n            if (t) {\n                clearInterval(t);\n                set({\n                    _timer: undefined\n                });\n            }\n        },\n        async create (title, url) {\n            const temp = {\n                id: \"tmp-\".concat(Date.now()),\n                title,\n                url,\n                createdAt: new Date().toISOString(),\n                postedBy: {\n                    id: \"\",\n                    email: \"you\",\n                    displayName: null,\n                    username: null\n                },\n                voteCount: 0,\n                upCount: 0,\n                downCount: 0,\n                userVote: 0\n            };\n            set({\n                items: [\n                    temp,\n                    ...get().items\n                ]\n            });\n            try {\n                const real = await (0,_lib_api__WEBPACK_IMPORTED_MODULE_0__.api)(\"/bookmarks\", {\n                    method: \"POST\",\n                    body: JSON.stringify({\n                        title,\n                        url\n                    })\n                });\n                set({\n                    items: get().items.map((x)=>x.id === temp.id ? real : x)\n                });\n            } catch (e) {\n                set({\n                    items: get().items.filter((x)=>x.id !== temp.id)\n                });\n                try {\n                    if (String(\"development\") !== \"production\") console.debug(\"[bookmarks.store] create failed\", e);\n                } catch (e) {\n                    void 0;\n                }\n                throw e;\n            }\n        },\n        updateItemCounts (bookmarkId, upCount, downCount, userVote) {\n            set({\n                items: get().items.map((it)=>it.id === bookmarkId ? {\n                        ...it,\n                        upCount,\n                        downCount,\n                        userVote\n                    } : it)\n            });\n            try {\n                const map = readPersistedVotes();\n                if (userVote === 0) delete map[bookmarkId];\n                else map[bookmarkId] = userVote;\n                writePersistedVotes(map);\n            } catch (e) {\n                try {\n                    if (String(\"development\") !== \"production\") console.debug(\"[bookmarks.store] updateItemCounts persist failed\", e);\n                } catch (e) {\n                    void 0;\n                }\n            }\n        },\n        clearUserVotes () {\n            try {\n                try {\n                    localStorage.removeItem(persistedKeyForUser());\n                } catch (e) {\n                    try {\n                        if (String(\"development\") !== \"production\") console.debug(\"[bookmarks.store] clearUserVotes localStorage remove failed\", e);\n                    } catch (e) {\n                        void 0;\n                    }\n                }\n                try {\n                    localStorage.removeItem(\"\".concat(PERSIST_KEY, \".anon\"));\n                } catch (e) {\n                    try {\n                        if (String(\"development\") !== \"production\") console.debug(\"[bookmarks.store] clearUserVotes localStorage remove anon failed\", e);\n                    } catch (e) {\n                        void 0;\n                    }\n                }\n            } catch (e) {\n                void e;\n            }\n            set({\n                items: get().items.map((it)=>({\n                        ...it,\n                        userVote: 0\n                    }))\n            });\n        },\n        updateItem (bookmarkId, patch) {\n            set({\n                items: get().items.map((it)=>it.id === bookmarkId ? {\n                        ...it,\n                        ...patch\n                    } : it)\n            });\n        }\n    }));\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zdG9yZXMvYm9va21hcmtzLnN0b3JlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O2tFQUNpQztBQUNBO0FBQ1c7QUFDTztBQUVuRCxNQUFNSSxjQUFjO0FBQ3BCLFNBQVNDO0lBQ1AsSUFBSTtRQUNGLElBQUksS0FBa0IsRUFBYSxFQUFtQkQ7UUFDdEQsTUFBTUUsSUFBSUoscURBQVlBLENBQUNLLFFBQVEsR0FBR0MsSUFBSTtRQUN0QyxPQUFPRixLQUFLQSxFQUFFRyxFQUFFLEdBQUcsR0FBa0JILE9BQWZGLGFBQVksS0FBUSxPQUFMRSxFQUFFRyxFQUFFLElBQUssR0FBZSxPQUFaTCxhQUFZO0lBQy9ELEVBQUUsVUFBTTtRQUNOLE9BQU8sR0FBZSxPQUFaQSxhQUFZO0lBQ3hCO0FBQ0Y7QUFDQSxTQUFTTTtJQUNQLElBQUk7UUFDRixJQUFJLEtBQWtCLEVBQWEsRUFBVTtRQUM3QyxNQUFNQyxNQUFNTjtRQUNaLE1BQU1PLE1BQU1DLGFBQWFDLE9BQU8sQ0FBQ0g7UUFDakMsSUFBSSxDQUFDQyxLQUFLLE9BQU8sQ0FBQztRQUNsQixNQUFNRyxTQUFTQyxLQUFLQyxLQUFLLENBQUNMO1FBQzFCLE9BQU8sT0FBT0csV0FBVyxZQUFZQSxTQUFTQSxTQUFTLENBQUM7SUFDMUQsRUFBRSxVQUFNO1FBQ04sT0FBTyxDQUFDO0lBQ1Y7QUFDRjtBQUNBLFNBQVNHLG9CQUFvQkMsR0FBK0I7SUFDMUQsSUFBSTtRQUNGLElBQUksS0FBa0IsRUFBYSxFQUFPO1FBQzFDLE1BQU1SLE1BQU1OO1FBQ1pRLGFBQWFPLE9BQU8sQ0FBQ1QsS0FBS0ssS0FBS0ssU0FBUyxDQUFDRjtJQUMzQyxFQUFFLE9BQU9HLEdBQUc7UUFBRSxLQUFLQTtJQUFHO0FBQ3hCO0FBaUNPLE1BQU1DLGVBQWV2QiwrQ0FBTUEsQ0FBWSxDQUFDd0IsS0FBS0MsTUFBUztRQUMzREMsT0FBTyxFQUFFO1FBQ1RDLFNBQVM7UUFDVEMsT0FBTztRQUVQLE1BQU1DO1lB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dEIsRUFBRSxPQUFPQSxHQUFHO2dCQUFFLEtBQUtBO1lBQUc7WUFDdEJFLElBQUk7Z0JBQUVFLE9BQU9ELE1BQU1DLEtBQUssQ0FBQ1AsR0FBRyxDQUFDLENBQUNjLEtBQVE7d0JBQUUsR0FBR0EsRUFBRTt3QkFBRUcsVUFBVTtvQkFBZ0I7WUFBSTtRQUMvRTtRQUNBb0MsWUFBV0gsVUFBa0IsRUFBRUksS0FBd0I7WUFDckRqRCxJQUFJO2dCQUFFRSxPQUFPRCxNQUFNQyxLQUFLLENBQUNQLEdBQUcsQ0FBQyxDQUFDYyxLQUFRQSxHQUFHeEIsRUFBRSxLQUFLNEQsYUFBYTt3QkFBRSxHQUFHcEMsRUFBRTt3QkFBRSxHQUFHd0MsS0FBSztvQkFBQyxJQUFJeEM7WUFBSztRQUMxRjtJQUNGLElBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3N0b3Jlcy9ib29rbWFya3Muc3RvcmUudHM/ZTYzZiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tICd6dXN0YW5kJztcbmltcG9ydCB7IGFwaSB9IGZyb20gJy4uL2xpYi9hcGknO1xuaW1wb3J0IHsgdXNlQXV0aFN0b3JlIH0gZnJvbSAnLi9hdXRoLnN0b3JlJztcbmltcG9ydCB7IGV4dHJhY3RFcnJvck1lc3NhZ2UgfSBmcm9tICcuLi9saWIvdXRpbHMnO1xuXG5jb25zdCBQRVJTSVNUX0tFWSA9ICdib29rbWFya2h1Yi52b3Rlcy52MSc7XG5mdW5jdGlvbiBwZXJzaXN0ZWRLZXlGb3JVc2VyKCkge1xuICB0cnkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIFBFUlNJU1RfS0VZO1xuICAgIGNvbnN0IHUgPSB1c2VBdXRoU3RvcmUuZ2V0U3RhdGUoKS51c2VyO1xuICAgIHJldHVybiB1ICYmIHUuaWQgPyBgJHtQRVJTSVNUX0tFWX0uJHt1LmlkfWAgOiBgJHtQRVJTSVNUX0tFWX0uYW5vbmA7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBgJHtQRVJTSVNUX0tFWX0uYW5vbmA7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlYWRQZXJzaXN0ZWRWb3RlcygpOiBSZWNvcmQ8c3RyaW5nLCAtMSB8IDAgfCAxPiB7XG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm4ge307XG4gICAgY29uc3Qga2V5ID0gcGVyc2lzdGVkS2V5Rm9yVXNlcigpO1xuICAgIGNvbnN0IHJhdyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgaWYgKCFyYXcpIHJldHVybiB7fTtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdyk7XG4gICAgcmV0dXJuIHR5cGVvZiBwYXJzZWQgPT09ICdvYmplY3QnICYmIHBhcnNlZCA/IHBhcnNlZCA6IHt9O1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4ge307XG4gIH1cbn1cbmZ1bmN0aW9uIHdyaXRlUGVyc2lzdGVkVm90ZXMobWFwOiBSZWNvcmQ8c3RyaW5nLCAtMSB8IDAgfCAxPikge1xuICB0cnkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgIGNvbnN0IGtleSA9IHBlcnNpc3RlZEtleUZvclVzZXIoKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KG1hcCkpO1xuICB9IGNhdGNoIChlKSB7IHZvaWQgZTsgfVxufVxuXG5leHBvcnQgdHlwZSBGZWVkSXRlbSA9IHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICBwb3N0ZWRCeToge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZyB8IG51bGw7XG4gICAgZGlzcGxheU5hbWU6IHN0cmluZyB8IG51bGw7XG4gICAgdXNlcm5hbWU6IHN0cmluZyB8IG51bGw7XG4gIH07XG4gIHZvdGVDb3VudDogbnVtYmVyO1xuICB1cENvdW50PzogbnVtYmVyO1xuICBkb3duQ291bnQ/OiBudW1iZXI7XG4gIHVzZXJWb3RlOiAtMSB8IDAgfCAxO1xufTtcblxuaW50ZXJmYWNlIEZlZWRTdGF0ZSB7XG4gIGl0ZW1zOiBGZWVkSXRlbVtdO1xuICBsb2FkaW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgZmV0Y2g6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIHN0YXJ0TGl2ZTogKCkgPT4gdm9pZDtcbiAgc3RvcExpdmU6ICgpID0+IHZvaWQ7XG4gIGNyZWF0ZTogKHRpdGxlOiBzdHJpbmcsIHVybDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICB1cGRhdGVJdGVtQ291bnRzOiAoYm9va21hcmtJZDogc3RyaW5nLCB1cENvdW50OiBudW1iZXIsIGRvd25Db3VudDogbnVtYmVyLCB1c2VyVm90ZTogLTEgfCAwIHwgMSkgPT4gdm9pZDtcbiAgY2xlYXJVc2VyVm90ZXM6ICgpID0+IHZvaWQ7XG4gIHVwZGF0ZUl0ZW06IChib29rbWFya0lkOiBzdHJpbmcsIHBhdGNoOiBQYXJ0aWFsPEZlZWRJdGVtPikgPT4gdm9pZDtcbiAgX3RpbWVyPzogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+IHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgY29uc3QgdXNlRmVlZFN0b3JlID0gY3JlYXRlPEZlZWRTdGF0ZT4oKHNldCwgZ2V0KSA9PiAoe1xuICBpdGVtczogW10sXG4gIGxvYWRpbmc6IGZhbHNlLFxuICBlcnJvcjogbnVsbCxcblxuICBhc3luYyBmZXRjaCgpIHtcbiAgICBzZXQoeyBsb2FkaW5nOiB0cnVlLCBlcnJvcjogbnVsbCB9KTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGFwaTxGZWVkSXRlbVtdPignL2Jvb2ttYXJrcycpO1xuICAgICAgY29uc3QgcmF3ID0gcmVhZFBlcnNpc3RlZFZvdGVzKCk7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZUF1dGhTdG9yZS5nZXRTdGF0ZSgpLnVzZXI7XG4gICAgICBjb25zdCBtZXJnZWQgPSBkYXRhLm1hcCgoaXQpID0+IHtcbiAgICAgICAgY29uc3QgcGVyc2lzdGVkID0gcmF3W2l0LmlkXSBhcyBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgICAgIGxldCB1djogLTEgfCAwIHwgMSA9IChpdC51c2VyVm90ZSA/PyAwKSBhcyAtMSB8IDAgfCAxO1xuICAgICAgICBpZiAoY3VycmVudFVzZXIgJiYgY3VycmVudFVzZXIuaWQpIHtcbiAgICAgICAgICBpZiAodXYgPT09IDAgJiYgdHlwZW9mIHBlcnNpc3RlZCA9PT0gJ251bWJlcicgJiYgcGVyc2lzdGVkICE9PSAwKSB1diA9IHBlcnNpc3RlZCBhcyAtMSB8IDAgfCAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHV2ID0gKHR5cGVvZiBwZXJzaXN0ZWQgPT09ICdudW1iZXInID8gcGVyc2lzdGVkIDogdXYpIGFzIC0xIHwgMCB8IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgLi4uaXQsIHVzZXJWb3RlOiB1diB9O1xuICAgICAgfSk7XG4gICAgICBzZXQoeyBpdGVtczogbWVyZ2VkIH0pO1xuICAgIH0gY2F0Y2ggKGU6IHVua25vd24pIHtcbiAgICAgIGNvbnN0IG1zZyA9IGV4dHJhY3RFcnJvck1lc3NhZ2UoZSwgJ0ZhaWxlZCB0byBsb2FkIGZlZWQnKTtcbiAgICAgIHNldCh7IGVycm9yOiBtc2cgfSk7XG4gICAgICB0cnkgeyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgIGlmIChTdHJpbmcocHJvY2Vzcy5lbnYuTk9ERV9FTlYpICE9PSAncHJvZHVjdGlvbicpIGNvbnNvbGUuZGVidWcoJ1tib29rbWFya3Muc3RvcmVdIGZldGNoIGZhaWxlZCcsIGUpO1xuICAgICAgfSBjYXRjaCB7IHZvaWQgMDsgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXQoeyBsb2FkaW5nOiBmYWxzZSB9KTtcbiAgICB9XG4gIH0sXG5cbiAgc3RhcnRMaXZlKCkge1xuICAgIGNvbnN0IHQgPSBnZXQoKS5fdGltZXI7XG4gICAgaWYgKHQpIHJldHVybjtcbiAgICBjb25zdCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IGdldCgpLmZldGNoKCksIDEwXzAwMCk7XG4gICAgc2V0KHsgX3RpbWVyOiB0aW1lciB9KTtcbiAgfSxcblxuICBzdG9wTGl2ZSgpIHtcbiAgICBjb25zdCB0ID0gZ2V0KCkuX3RpbWVyO1xuICAgIGlmICh0KSB7XG4gICAgICBjbGVhckludGVydmFsKHQpO1xuICAgICAgc2V0KHsgX3RpbWVyOiB1bmRlZmluZWQgfSk7XG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIGNyZWF0ZSh0aXRsZSwgdXJsKSB7XG4gICAgY29uc3QgdGVtcDogRmVlZEl0ZW0gPSB7XG4gICAgICBpZDogYHRtcC0ke0RhdGUubm93KCl9YCxcbiAgICAgIHRpdGxlLFxuICAgICAgdXJsLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBwb3N0ZWRCeTogeyBpZDogJycsIGVtYWlsOiAneW91JywgZGlzcGxheU5hbWU6IG51bGwsIHVzZXJuYW1lOiBudWxsIH0sXG4gICAgICB2b3RlQ291bnQ6IDAsXG4gICAgICB1cENvdW50OiAwLFxuICAgICAgZG93bkNvdW50OiAwLFxuICAgICAgdXNlclZvdGU6IDAsXG4gICAgfTtcbiAgICBzZXQoeyBpdGVtczogW3RlbXAsIC4uLmdldCgpLml0ZW1zXSB9KTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWFsID0gYXdhaXQgYXBpPEZlZWRJdGVtPignL2Jvb2ttYXJrcycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdGl0bGUsIHVybCB9KSxcbiAgICAgIH0pO1xuICAgICAgc2V0KHsgaXRlbXM6IGdldCgpLml0ZW1zLm1hcCgoeCkgPT4gKHguaWQgPT09IHRlbXAuaWQgPyByZWFsIDogeCkpIH0pO1xuICAgIH0gY2F0Y2ggKGU6IHVua25vd24pIHtcbiAgICAgIHNldCh7IGl0ZW1zOiBnZXQoKS5pdGVtcy5maWx0ZXIoKHgpID0+IHguaWQgIT09IHRlbXAuaWQpIH0pO1xuICAgICAgdHJ5IHsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGlmIChTdHJpbmcocHJvY2Vzcy5lbnYuTk9ERV9FTlYpICE9PSAncHJvZHVjdGlvbicpIGNvbnNvbGUuZGVidWcoJ1tib29rbWFya3Muc3RvcmVdIGNyZWF0ZSBmYWlsZWQnLCBlKTtcbiAgICAgIH0gY2F0Y2ggeyB2b2lkIDA7IH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZUl0ZW1Db3VudHMoYm9va21hcmtJZDogc3RyaW5nLCB1cENvdW50OiBudW1iZXIsIGRvd25Db3VudDogbnVtYmVyLCB1c2VyVm90ZTogLTEgfCAwIHwgMSkge1xuICAgIHNldCh7IGl0ZW1zOiBnZXQoKS5pdGVtcy5tYXAoKGl0KSA9PiAoaXQuaWQgPT09IGJvb2ttYXJrSWQgPyB7IC4uLml0LCB1cENvdW50LCBkb3duQ291bnQsIHVzZXJWb3RlIH0gOiBpdCkpIH0pO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtYXAgPSByZWFkUGVyc2lzdGVkVm90ZXMoKTtcbiAgICAgIGlmICh1c2VyVm90ZSA9PT0gMCkgZGVsZXRlIG1hcFtib29rbWFya0lkXTtcbiAgICAgIGVsc2UgbWFwW2Jvb2ttYXJrSWRdID0gdXNlclZvdGU7XG4gICAgICB3cml0ZVBlcnNpc3RlZFZvdGVzKG1hcCk7XG4gICAgfSBjYXRjaCAoZSkgeyB0cnkgeyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgIGlmIChTdHJpbmcocHJvY2Vzcy5lbnYuTk9ERV9FTlYpICE9PSAncHJvZHVjdGlvbicpIGNvbnNvbGUuZGVidWcoJ1tib29rbWFya3Muc3RvcmVdIHVwZGF0ZUl0ZW1Db3VudHMgcGVyc2lzdCBmYWlsZWQnLCBlKTtcbiAgICB9IGNhdGNoIHsgdm9pZCAwOyB9IH1cbiAgfSxcbiAgY2xlYXJVc2VyVm90ZXMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRyeSB7IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHBlcnNpc3RlZEtleUZvclVzZXIoKSk7IH0gY2F0Y2ggKGUpIHsgdHJ5IHsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGlmIChTdHJpbmcocHJvY2Vzcy5lbnYuTk9ERV9FTlYpICE9PSAncHJvZHVjdGlvbicpIGNvbnNvbGUuZGVidWcoJ1tib29rbWFya3Muc3RvcmVdIGNsZWFyVXNlclZvdGVzIGxvY2FsU3RvcmFnZSByZW1vdmUgZmFpbGVkJywgZSk7XG4gICAgICB9IGNhdGNoIHsgdm9pZCAwOyB9IH1cbiAgICAgIHRyeSB7IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGAke1BFUlNJU1RfS0VZfS5hbm9uYCk7IH0gY2F0Y2ggKGUpIHsgdHJ5IHsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGlmIChTdHJpbmcocHJvY2Vzcy5lbnYuTk9ERV9FTlYpICE9PSAncHJvZHVjdGlvbicpIGNvbnNvbGUuZGVidWcoJ1tib29rbWFya3Muc3RvcmVdIGNsZWFyVXNlclZvdGVzIGxvY2FsU3RvcmFnZSByZW1vdmUgYW5vbiBmYWlsZWQnLCBlKTtcbiAgICAgIH0gY2F0Y2ggeyB2b2lkIDA7IH0gfVxuICAgIH0gY2F0Y2ggKGUpIHsgdm9pZCBlOyB9XG4gICAgc2V0KHsgaXRlbXM6IGdldCgpLml0ZW1zLm1hcCgoaXQpID0+ICh7IC4uLml0LCB1c2VyVm90ZTogMCBhcyAtMSB8IDAgfCAxIH0pKSB9KTtcbiAgfSxcbiAgdXBkYXRlSXRlbShib29rbWFya0lkOiBzdHJpbmcsIHBhdGNoOiBQYXJ0aWFsPEZlZWRJdGVtPikge1xuICAgIHNldCh7IGl0ZW1zOiBnZXQoKS5pdGVtcy5tYXAoKGl0KSA9PiAoaXQuaWQgPT09IGJvb2ttYXJrSWQgPyB7IC4uLml0LCAuLi5wYXRjaCB9IDogaXQpKSB9KTtcbiAgfSxcbn0pKTsiXSwibmFtZXMiOlsiY3JlYXRlIiwiYXBpIiwidXNlQXV0aFN0b3JlIiwiZXh0cmFjdEVycm9yTWVzc2FnZSIsIlBFUlNJU1RfS0VZIiwicGVyc2lzdGVkS2V5Rm9yVXNlciIsInUiLCJnZXRTdGF0ZSIsInVzZXIiLCJpZCIsInJlYWRQZXJzaXN0ZWRWb3RlcyIsImtleSIsInJhdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJ3cml0ZVBlcnNpc3RlZFZvdGVzIiwibWFwIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImUiLCJ1c2VGZWVkU3RvcmUiLCJzZXQiLCJnZXQiLCJpdGVtcyIsImxvYWRpbmciLCJlcnJvciIsImZldGNoIiwiZGF0YSIsImN1cnJlbnRVc2VyIiwibWVyZ2VkIiwiaXQiLCJwZXJzaXN0ZWQiLCJ1diIsInVzZXJWb3RlIiwibXNnIiwiU3RyaW5nIiwiY29uc29sZSIsImRlYnVnIiwic3RhcnRMaXZlIiwidCIsIl90aW1lciIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJzdG9wTGl2ZSIsImNsZWFySW50ZXJ2YWwiLCJ1bmRlZmluZWQiLCJ0aXRsZSIsInVybCIsInRlbXAiLCJEYXRlIiwibm93IiwiY3JlYXRlZEF0IiwidG9JU09TdHJpbmciLCJwb3N0ZWRCeSIsImVtYWlsIiwiZGlzcGxheU5hbWUiLCJ1c2VybmFtZSIsInZvdGVDb3VudCIsInVwQ291bnQiLCJkb3duQ291bnQiLCJyZWFsIiwibWV0aG9kIiwiYm9keSIsIngiLCJmaWx0ZXIiLCJ1cGRhdGVJdGVtQ291bnRzIiwiYm9va21hcmtJZCIsImNsZWFyVXNlclZvdGVzIiwicmVtb3ZlSXRlbSIsInVwZGF0ZUl0ZW0iLCJwYXRjaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/stores/bookmarks.store.ts\n"));

/***/ })

}]);